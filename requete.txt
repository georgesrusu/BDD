
R1:

SELECT identifiant FROM Utilisateur WHERE ID IN (SELECT clientID FROM Commentaire WHERE etablissementID IN (SELECT etablissementID FROM Commentaire WHERE clientID IN (SELECT ID FROM Utilisateur WHERE identifiant="Brenda") AND score>=4) GROUP BY clientID HAVING count(etablissementID)>=3)

R2:

SELECT l.texte FROM Label l group by l.texte having count(distinct l.etablissementID) > 4;

SELECT DISTINCT Etablissements_com.Name FROM `Etablissements_com` WHERE (Etablissements_com.Score=5 OR Etablissements_com.Score=4) AND Etablissements_com.nickname IN(SELECT Etablissements_com.nickname FROM `Etablissements_com` WHERE (Etablissements_com.Score=5 OR Etablissements_com.Score=4) AND Etablissements_com.Name IN (SELECT Etablissements_com.Name FROM `Etablissements_com` WHERE (Etablissements_com.Score=5 OR Etablissements_com.Score=4) AND Etablissements_com.nickname='Brenda'))

SELECT DISTINCT etablissementID FROM Commentaire WHERE score>=4 AND etablissementID IN(SELECT etablissementID FROM Commentaire WHERE score>=4 AND Etablissements_com.Name IN (SELECT Etablissements_com.Name FROM `Etablissements_com` WHERE (Etablissements_com.Score=5 OR Etablissements_com.Score=4) AND Etablissements_com.nickname='Brenda'))

Select EtablissementID FROM Commentaire where clientID IN (SELECT ID FROM Utilisateur WHERE ID IN (SELECT clientID FROM Commentaire WHERE etablissementID IN (SELECT etablissementID FROM Commentaire WHERE clientID IN (SELECT ID FROM Utilisateur WHERE identifiant="Brenda") AND score>=4)))

SELECT etablissementID FROM Commentaire WHERE clientID IN (SELECT ID FROM Utilisateur WHERE identifiant="Brenda") AND score>=4 //ce que brenda aime

select etablissementID from Commentaire where clientID in(select ID from Utilisateur where ID in (select clientID from Commentaire where etablissementID IN(SELECT etablissementID FROM Commentaire WHERE clientID IN (SELECT ID FROM Utilisateur WHERE identifiant="Brenda") AND score>=4)));

select distinct etablissementID from Commentaire where not exists (select clientID from Commentaire where not exists (SELECT etablissementID FROM Commentaire WHERE clientID IN (SELECT ID FROM Utilisateur WHERE identifiant="Brenda") AND score>=4));

//confirmation


select distinct clientID from Commentaire where etablissementID in(SELECT etablissementID FROM Commentaire WHERE clientID IN (SELECT ID FROM Utilisateur WHERE identifiant="Brenda") AND score>=4) group by clientID having count(distinct etablissementID)>=(SELECT count(etablissementID) FROM Commentaire WHERE clientID IN (SELECT ID FROM Utilisateur WHERE identifiant="Brenda") AND score>=4);


select nom from Etablissement where ID in(select distinct etablissementID from Commentaire where clientID in (select distinct clientID from Commentaire where etablissementID in(SELECT etablissementID FROM Commentaire WHERE clientID IN (SELECT ID FROM Utilisateur WHERE identifiant="Brenda") AND score>=4) group by clientID having count(distinct etablissementID)>=(SELECT count(etablissementID) FROM Commentaire WHERE clientID IN (SELECT ID FROM Utilisateur WHERE identifiant="Brenda") AND score>=4)));
R3:

SELECT nom FROM Etablissement WHERE ID IN (SELECT DISTINCT e.ID FROM Etablissement e WHERE NOT EXISTS (SELECT * FROM Commentaire c WHERE c.etablissementID=e.ID) OR EXISTS (SELECT * FROM Commentaire c WHERE c.etablissementID=e.ID GROUP BY e.ID HAVING count(*)<=1))

R4:

SELECT identifiant FROM Utilisateur WHERE ID IN (SELECT m.adminID FROM ModificationAdmin m WHERE not exists (SELECT * FROM Commentaire WHERE clientID=m.adminID AND etablissementID=m.etablissementID))

R5:

SELECT nom FROM Etablissement e,Commentaire c WHERE e.ID=c.etablissementID GROUP BY c.etablissementID HAVING count(*)>=3 ORDER BY avg(c.score) DESC

R6:

SELECT l.texte FROM Label l,Commentaire c WHERE l.etablissementID=c.etablissementID GROUP BY texte HAVING count(DISTINCT l.etablissementID)>=5 ORDER BY avg(c.score) DESC
